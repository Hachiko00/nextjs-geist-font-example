<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - EduConnect LMS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body class="dashboard-page">
    <!-- Dashboard Header -->
    <header class="dashboard-header">
        <div class="header-container">
            <div class="header-brand">
                <h1 class="brand-title">EduConnect</h1>
                <span class="brand-subtitle">Dashboard</span>
            </div>
            
            <div class="header-user">
                <div class="user-info">
                    <span id="user-name" class="user-name">Loading...</span>
                    <span id="user-role" class="user-role">User</span>
                </div>
                <div class="user-actions">
                    <button id="notifications-btn" class="notification-btn">
                        <span class="notification-icon"></span>
                        <span id="notification-count" class="notification-count" style="display: none;">0</span>
                    </button>
                    <button id="logout-btn" class="logout-btn">Logout</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Dashboard Navigation -->
    <nav class="dashboard-nav">
        <div class="nav-container">
            <div class="nav-items">
                <button class="nav-item active" data-section="overview">
                    <span class="nav-icon overview-icon"></span>
                    <span class="nav-text">Overview</span>
                </button>
                <button class="nav-item" data-section="badges">
                    <span class="nav-icon badge-icon"></span>
                    <span class="nav-text">Badges</span>
                </button>
                <button class="nav-item" data-section="messages">
                    <span class="nav-icon message-icon"></span>
                    <span class="nav-text">Messages</span>
                </button>
                <button class="nav-item teacher-only" data-section="users" style="display: none;">
                    <span class="nav-icon users-icon"></span>
                    <span class="nav-text">Users</span>
                </button>
                <button class="nav-item" data-section="profile">
                    <span class="nav-icon profile-icon"></span>
                    <span class="nav-text">Profile</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Dashboard Content -->
    <main class="dashboard-main">
        <!-- Overview Section -->
        <section id="overview-section" class="dashboard-section active">
            <div class="section-header">
                <h2 class="section-title">Dashboard Overview</h2>
                <p class="section-subtitle">Welcome back! Here's what's happening in your learning journey.</p>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon badge-icon"></div>
                    <div class="stat-content">
                        <div id="total-badges" class="stat-number">0</div>
                        <div class="stat-label">Total Badges</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon points-icon"></div>
                    <div class="stat-content">
                        <div id="total-points" class="stat-number">0</div>
                        <div class="stat-label">Total Points</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon message-icon"></div>
                    <div class="stat-content">
                        <div id="unread-messages" class="stat-number">0</div>
                        <div class="stat-label">Unread Messages</div>
                    </div>
                </div>
                <div class="stat-card teacher-only" style="display: none;">
                    <div class="stat-icon users-icon"></div>
                    <div class="stat-content">
                        <div id="total-students" class="stat-number">0</div>
                        <div class="stat-label">Students</div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="activity-section">
                <h3 class="activity-title">Recent Activity</h3>
                <div id="recent-activity" class="activity-list">
                    <div class="activity-item loading">
                        <div class="activity-content">Loading recent activity...</div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <h3 class="actions-title">Quick Actions</h3>
                <div class="actions-grid">
                    <button class="action-btn" data-action="view-badges">
                        <span class="action-icon badge-icon"></span>
                        <span class="action-text">View Badges</span>
                    </button>
                    <button class="action-btn" data-action="send-message">
                        <span class="action-icon message-icon"></span>
                        <span class="action-text">Send Message</span>
                    </button>
                    <button class="action-btn teacher-only" data-action="award-badge" style="display: none;">
                        <span class="action-icon award-icon"></span>
                        <span class="action-text">Award Badge</span>
                    </button>
                    <button class="action-btn" data-action="update-profile">
                        <span class="action-icon profile-icon"></span>
                        <span class="action-text">Update Profile</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Badges Section -->
        <section id="badges-section" class="dashboard-section">
            <div class="section-header">
                <h2 class="section-title">Achievement Badges</h2>
                <p class="section-subtitle">Track your progress and celebrate your achievements.</p>
            </div>

            <!-- Badge Stats -->
            <div class="badge-stats">
                <div class="badge-stat">
                    <span class="badge-stat-number" id="badge-count">0</span>
                    <span class="badge-stat-label">Badges Earned</span>
                </div>
                <div class="badge-stat">
                    <span class="badge-stat-number" id="badge-points">0</span>
                    <span class="badge-stat-label">Total Points</span>
                </div>
            </div>

            <!-- Badge Categories -->
            <div class="badge-categories">
                <button class="category-btn active" data-category="all">All Badges</button>
                <button class="category-btn" data-category="welcome">Welcome</button>
                <button class="category-btn" data-category="assignment">Assignment</button>
                <button class="category-btn" data-category="attendance">Attendance</button>
                <button class="category-btn" data-category="communication">Communication</button>
                <button class="category-btn" data-category="achievement">Achievement</button>
            </div>

            <!-- Badges Grid -->
            <div id="badges-grid" class="badges-grid">
                <div class="loading-message">Loading badges...</div>
            </div>

            <!-- Teacher Badge Management -->
            <div class="teacher-only badge-management" style="display: none;">
                <h3>Badge Management</h3>
                <div class="management-actions">
                    <button id="award-badge-btn" class="btn btn-primary">Award Badge</button>
                    <button id="create-badge-btn" class="btn btn-secondary">Create Badge</button>
                </div>
            </div>
        </section>

        <!-- Messages Section -->
        <section id="messages-section" class="dashboard-section">
            <div class="section-header">
                <h2 class="section-title">Voice Messages</h2>
                <p class="section-subtitle">Communicate with voice messages and text.</p>
            </div>

            <!-- Message Actions -->
            <div class="message-actions">
                <button id="compose-message-btn" class="btn btn-primary">Compose Message</button>
                <div class="message-filters">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="received">Received</button>
                    <button class="filter-btn" data-filter="sent">Sent</button>
                </div>
            </div>

            <!-- Messages List -->
            <div id="messages-list" class="messages-list">
                <div class="loading-message">Loading messages...</div>
            </div>
        </section>

        <!-- Users Section (Teachers Only) -->
        <section id="users-section" class="dashboard-section teacher-only" style="display: none;">
            <div class="section-header">
                <h2 class="section-title">User Management</h2>
                <p class="section-subtitle">Manage students, guardians, and system users.</p>
            </div>

            <!-- User Search -->
            <div class="user-search">
                <input type="text" id="user-search-input" class="search-input" placeholder="Search users...">
                <div class="search-filters">
                    <select id="role-filter" class="filter-select">
                        <option value="">All Roles</option>
                        <option value="student">Students</option>
                        <option value="guardian">Guardians</option>
                        <option value="teacher">Teachers</option>
                    </select>
                </div>
            </div>

            <!-- Users List -->
            <div id="users-list" class="users-list">
                <div class="loading-message">Loading users...</div>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile-section" class="dashboard-section">
            <div class="section-header">
                <h2 class="section-title">Profile Settings</h2>
                <p class="section-subtitle">Manage your account information and preferences.</p>
            </div>

            <!-- Profile Form -->
            <div class="profile-form-container">
                <form id="profile-form" class="profile-form">
                    <div class="form-group">
                        <label for="profile-username" class="form-label">Username</label>
                        <input type="text" id="profile-username" class="form-input" readonly>
                    </div>
                    <div class="form-group">
                        <label for="profile-email" class="form-label">Email</label>
                        <input type="email" id="profile-email" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="profile-fullname" class="form-label">Full Name</label>
                        <input type="text" id="profile-fullname" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="profile-role" class="form-label">Role</label>
                        <input type="text" id="profile-role" class="form-input" readonly>
                    </div>
                    <button type="submit" class="btn btn-primary">Update Profile</button>
                </form>

                <!-- Change Password -->
                <div class="password-section">
                    <h3>Change Password</h3>
                    <form id="password-form" class="password-form">
                        <div class="form-group">
                            <label for="current-password" class="form-label">Current Password</label>
                            <input type="password" id="current-password" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="new-password" class="form-label">New Password</label>
                            <input type="password" id="new-password" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="confirm-password" class="form-label">Confirm New Password</label>
                            <input type="password" id="confirm-password" class="form-input" required>
                        </div>
                        <button type="submit" class="btn btn-secondary">Change Password</button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Modals -->
    <div id="modal-overlay" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-title" class="modal-title">Modal Title</h3>
                <button id="modal-close" class="modal-close">&times;</button>
            </div>
            <div id="modal-content" class="modal-content">
                <!-- Dynamic content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading...</div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <script src="js/main.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/badges.js"></script>
    <script src="js/voice.js"></script>
</body>
</html>
